var VueTable=function(t,e,a,n,r,i){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,a=a&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a;var o="default"in n?n.default:n;function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function c(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(Object(a),!0).forEach((function(e){l(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function d(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return f(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(a);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return f(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function p(t,e,a,n,r,i,o,s,l,c){"boolean"!=typeof o&&(l=s,s=o,o=!1);const u="function"==typeof a?a.options:a;let d;if(t&&t.render&&(u.render=t.render,u.staticRenderFns=t.staticRenderFns,u._compiled=!0,r&&(u.functional=!0)),n&&(u._scopeId=n),i?(d=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,l(t)),t&&t._registeredComponents&&t._registeredComponents.add(i)},u._ssrRegister=d):e&&(d=o?function(t){e.call(this,c(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,s(t))}),d)if(u.functional){const t=u.render;u.render=function(e,a){return d.call(a),t(e,a)}}else{const t=u.beforeCreate;u.beforeCreate=t?[].concat(t,d):[d]}return a}r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r,i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i;var m=p({render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.column.sortable?a("a",{attrs:{role:"button",href:"#"},on:{click:function(e){return e.preventDefault(),t.setOrder(e)}}},[t._v("\n    "+t._s(t.column.title)+"\n\n    "),a("i",{staticClass:"fas fa-fw",class:t.sortIcon})]):a("span",[t._v("\n    "+t._s(t.column.title)+"\n")])},staticRenderFns:[]},void 0,{name:"VueTableHeading",data:function(){return{direction:null}},props:{column:{type:Object,required:!0,validator:function(t){return Object.prototype.hasOwnProperty.call(t,"name")&&Object.prototype.hasOwnProperty.call(t,"title")&&Object.prototype.hasOwnProperty.call(t,"sortable")}}},computed:u({sortIcon:function(){switch(this.direction){case"asc":return"fa-sort-up";case"desc":return"fa-sort-down";default:return"fa-sort"}}},n.mapState("sortingModule",["sorting"])),methods:u({setOrder:function(){this.direction=null==this.direction?"asc":"asc"===this.direction?"desc":null,this.addSort({column:this.column.name,direction:this.direction})},extractDirectionFromSorting:function(){var t=this,e=this.sorting.filter((function(e){return e.column==t.column.name}));return e[0]?e[0].direction:null}},n.mapActions("sortingModule",{addSort:"addSortAction"})),mounted:function(){this.sortable&&(this.direction=this.extractDirectionFromSorting())}},void 0,!1,void 0,!1,void 0,void 0,void 0),g=p({render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group"},[t._m(0),t._v(" "),a("input",{staticClass:"form-control",attrs:{type:"text",placeholder:t.lang.search_for},domProps:{value:t.value},on:{input:function(e){return t.setValue(e.target.value)}}})])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("div",{staticClass:"input-group-text"},[e("i",{staticClass:"fas fa-search"})])])}]},void 0,{name:"VueTableSearchBar",data:function(){return{lang:this.$parent.lang}},methods:u({},n.mapActions("searchModule",{setValue:"setValueAction"})),computed:u({},n.mapState("searchModule",["value"]))},void 0,!1,void 0,!1,void 0,void 0,void 0),h=p({render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.totalPages>1?a("nav",[a("ul",{staticClass:"pagination"},[1!=t.page?[a("li",{staticClass:"page-item"},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"First"},on:{click:function(e){return e.preventDefault(),t.setPage(1)}}},[a("i",{staticClass:"fas fa-backward"}),t._v(" "),a("span",{staticClass:"sr-only"},[t._v("First")])])]),t._v(" "),a("li",{staticClass:"page-item"},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(e){return e.preventDefault(),t.setPage(t.page-1)}}},[a("i",{staticClass:"fas fa-caret-left"}),t._v(" "),a("span",{staticClass:"sr-only"},[t._v("Previous")])])])]:t._e(),t._v(" "),t._l(t.linkButtons,(function(e,n){return a("li",{key:n,staticClass:"page-item",class:{active:e==t.page}},[a("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.setPage(e)}}},[t._v(t._s(e))])])})),t._v(" "),t.page!=t.totalPages?[a("li",{staticClass:"page-item"},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(e){return e.preventDefault(),t.setPage(t.page+1)}}},[a("i",{staticClass:"fas fa-caret-right"}),t._v(" "),a("span",{staticClass:"sr-only"},[t._v("Next")])])]),t._v(" "),a("li",{staticClass:"page-item"},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Last"},on:{click:function(e){return e.preventDefault(),t.setPage(t.totalPages)}}},[a("i",{staticClass:"fas fa-forward"}),t._v(" "),a("span",{staticClass:"sr-only"},[t._v("Last")])])])]:t._e()],2),t._v("\n\n    Showing "+t._s(t.start)+" - "+t._s(t.end)+" of "+t._s(t.items)+"\n")]):t._e()},staticRenderFns:[]},void 0,{name:"VueTablePagination",props:{items:{type:Number,default:0,validator:function(t){return t>=0}},perPage:{type:Number,default:20,validator:function(t){return t>0}},maxLinks:{type:Number,default:5,validator:function(t){return t>0}}},methods:u({},n.mapActions("paginationModule",{setPage:"setPageAction"})),computed:u({start:function(){return(this.page-1)*this.perPage},end:function(){var t=this.start+this.perPage;return this.items<t?this.items:t},totalPages:function(){return Math.ceil(this.items/this.perPage)},linkButtons:function(){for(var t=this.linksSpan,e=[],a=t.lower;a<=t.higher;a++)e.push(a);return e},linksSpan:function(){var t=Math.floor(this.maxLinks/2),e=this.page-t,a=e<0?Math.abs(e)+1:0,n=this.page+t,r=n>this.totalPages?n-this.totalPages:0;return e+=a,n-=r,e-=r,n+=a,{lower:e+=e<1?1+Math.abs(e):0,higher:n-=n>this.totalPages?n-this.totalPages:0}}},n.mapState("paginationModule",["page"]))},void 0,!1,void 0,!1,void 0,void 0,void 0),v="vue_table_".concat(window.location.pathname,"_filters"),b=window.localStorage.getItem(v),y={namespaced:!0,state:{filters:b?JSON.parse(b):[]},mutations:{addFilter:function(t,e){t.filters=t.filters.filter((function(t){return t.column!=e.column})),e.values.length&&t.filters.push(e)},saveData:function(t){window.localStorage.setItem(v,JSON.stringify(t.filters))}},actions:{addFilterAction:function(t,e){var a=t.commit;a("addFilter",e),a("saveData")}}},_="vue_table_".concat(window.location.pathname,"_page"),w=window.localStorage.getItem(_),S={namespaced:!0,state:{page:w?parseInt(w):1},mutations:{setPage:function(t,e){t.page=e},saveData:function(t){window.localStorage.setItem(_,t.page)}},actions:{setPageAction:function(t,e){var a=t.commit;a("setPage",e),a("saveData")}}},O="vue_table_".concat(window.location.pathname,"_search"),P=window.localStorage.getItem(O),C={namespaced:!0,state:{value:null!=P?P:""},mutations:{setValue:function(t,e){t.value=e},saveData:function(t){window.localStorage.setItem(O,t.value)}},actions:{setValueAction:function(t,e){var a=t.commit;a("setValue",e),a("saveData")}}},j="vue_table_".concat(window.location.pathname,"_sorting"),A=window.localStorage.getItem(j),I={namespaced:!0,state:{sorting:A?JSON.parse(A):[]},mutations:{addSort:function(t,e){t.sorting=t.sorting.filter((function(t){return t.column!=e.column})),t.sorting.push(e)},saveData:function(t){window.localStorage.setItem(j,JSON.stringify(t.sorting))}},actions:{addSortAction:function(t,e){var a=t.commit;a("addSort",e),a("saveData")}}};r.use(o);var k=p({render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"card mb-4"},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"form-row"},[t._t("filters"),t._v(" "),a("div",{staticClass:"col"},[t.isSearchable?a("vue-table-search-bar"):t._e()],1)],2)])]),t._v(" "),a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[0===t.items.length?a("div",{staticClass:"alert alert-info"},[t._v("\n                "+t._s(t.lang.no_records)+"\n            ")]):a("div",[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-striped"},[a("thead",[a("tr",[t.orderable?a("th",{staticClass:"min-width"}):t._e(),t._v(" "),t._l(t.visibleColumns,(function(t){return a("th",{key:t.name,class:t.headerClasses},[a("vue-table-heading",{attrs:{column:t}})],1)})),t._v(" "),t.actions.slots.length?a("th"):t._e()],2)]),t._v(" "),a("vue-draggable",{attrs:{tag:"tbody",handle:".v-table-drag-handle",disabled:!t.orderable},on:{change:function(e){return t.$emit("itemsReordered",e.moved.element,e.moved.newIndex)}},model:{value:t.items,callback:function(e){t.items=e},expression:"items"}},t._l(t.items,(function(e){return a("tr",{key:e.id},[t.orderable?a("td",{staticClass:"min-width align-middle"},[a("button",{staticClass:"btn btn-sm v-table-drag-handle",attrs:{type:"button"}},[a("i",{staticClass:"fas fa-arrows-alt-v"})])]):t._e(),t._v(" "),t._l(t.visibleColumns,(function(n,r){return a("td",{key:r,class:n.rowClasses},[n.render&&"function"==typeof n.render?[a("div",{domProps:{innerHTML:t._s(n.render(e))}})]:n.name?[t._v("\n                                        "+t._s(e[n.name])+"\n                                    ")]:t._e()],2)})),t._v(" "),t.actions.slots.length?a("td",{staticClass:"v-table-options-wrapper min-width align-middle",class:t.actions.classes},[t._l(t.actions.slots,(function(a){return t._t("action-"+a,null,{item:e})}))],2):t._e()],2)})),0)],1)]),t._v(" "),t.paginate?a("vue-table-pagination",{attrs:{"per-page":t.perPage,items:t.totalItems}}):t._e()],1)])])])},staticRenderFns:[]},void 0,{store:new o.Store({modules:{filtersModule:y,paginationModule:S,searchModule:C,sortingModule:I}}),name:"VueTable",components:{VueTableHeading:m,VueDraggable:i,VueTablePagination:h,VueTableSearchBar:g},data:function(){return{items:[],lang:{no_records:"No records found!",search_for:"Search for..."},totalItems:0}},props:{actions:{type:Object,default:function(){return{classes:"",slots:[]}},validator:function(t){return Object.prototype.hasOwnProperty.call(t,"slots")&&"object"===s(t.slots)}},columns:{type:Array,default:function(){return[]}},dataKey:{type:String,default:"data"},locale:{type:String,default:"en"},metaKey:{type:String,default:"meta"},orderable:{type:Boolean,default:!1},paginate:{type:Boolean,default:!0},perPage:{type:Number,default:20,validator:function(t){return t>0}},sorting:{type:Array,default:function(){return[]}},uri:{type:String,default:null}},methods:u({getItems:function(){var t=this,n=e,r=a,i={params:{columns:this.columns,page:this.page,filters:this.filters,perPage:this.perPage,search:this.search,sorting:this.currentSorting},paramsSerializer:function(t){return r.stringify(t)}};n.get(this.uri,i).then((function(e){var a;(Object.prototype.hasOwnProperty.call(e.data,t.dataKey)&&(t.items=e.data[t.dataKey]),Object.prototype.hasOwnProperty.call(e.data,t.metaKey))&&(t.totalItems=null!==(a=e.data[t.metaKey].total)&&void 0!==a?a:t.items.length);t.$emit("update:items",t.items)}))},getSearchableColumns:function(){return this.columns.filter((function(t){return t.searchable}))},hydrateColumns:function(){this.columns.forEach((function(t){Object.prototype.hasOwnProperty.call(t,"name")||(t.name=null),Object.prototype.hasOwnProperty.call(t,"title")||(t.title=""),Object.prototype.hasOwnProperty.call(t,"sortable")&&"boolean"==typeof t.sortable||(t.sortable=!0),Object.prototype.hasOwnProperty.call(t,"visible")||(t.visible=!0)}))}},n.mapActions("sortingModule",{addSort:"addSortAction"}),{},n.mapActions("paginationModule",{setPage:"setPageAction"}),{},n.mapActions("filtersModule",{setFilter:"addFilterAction"})),computed:u({isSearchable:function(){return this.getSearchableColumns().length>0},visibleColumns:function(){return this.columns.filter((function(t){return t.visible}))}},n.mapState("filtersModule",["filters"]),{},n.mapState("sortingModule",{currentSorting:"sorting"}),{},n.mapState("searchModule",{search:"value"}),{},n.mapState("paginationModule",["page"])),watch:{page:function(){this.getItems()},currentSorting:function(){this.getItems()},search:function(){this.setPage(1),this.getItems()},filters:function(){this.setPage(1),this.getItems()}},created:function(){this.hydrateColumns()},mounted:function(){var t=this;this.sorting.forEach((function(e){return t.addSort(e)})),this.$root.$on("filterOptionSelected",this.setFilter),null!==this.uri&&this.getItems()}},void 0,!1,void 0,!1,void 0,void 0,void 0),M={name:"filter-column",bind:function(t,e,a){var n=e.value,r=window.localStorage.getItem(v),i=(r=r?JSON.parse(r):[]).find((function(t){return t.column==n}));void 0!==i&&d(t.options).filter((function(t){return i.values.includes(t.value)})).map((function(t){return t.setAttribute("selected",!0)})),t.addEventListener("change",(function(t){var e=d(t.target.options).filter((function(t){return t.selected&&t.value})).map((function(t){return t.value})),r={column:n,values:e};a.context.$root.$emit("filterOptionSelected",r)}))}},V=function(t){V.installed||(V.installed=!0,t.component("VueTable",k))},D={install:V},$=null;return"undefined"!=typeof window?$=window.Vue:"undefined"!=typeof global&&($=global.Vue),$&&$.use(D),k.install=V,t.VueTable=k,t.filterColumn=M,t}({},axios,qs,vuex,Vue,VueDraggable);